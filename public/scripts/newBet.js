var myweb3 = new Web3(web3.currentProvider);
var deployContractButton = document.querySelector("#deployContractButton");

var bytecode = "0x606060405260405162002403380380620024038339810160405280805190602001909190805182019190602001805182019190505033600760006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555081600590805190602001906200008d929190620000b7565b508260098190555080600b9080519060200190620000ad929190620000b7565b5050505062000166565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f10620000fa57805160ff19168380011785556200012b565b828001600101855582156200012b579182015b828111156200012a5782518255916020019190600101906200010d565b5b5090506200013a91906200013e565b5090565b6200016391905b808211156200015f57600081600090555060010162000145565b5090565b90565b61228d80620001766000396000f3006060604052600436106100d0576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff1680630ce1253b146100d55780631926c73b1461016357806320a0fdbc146101f157806327dc297e146102465780633376def8146102b057806338bbfa50146102ba578063409bea131461036757806363bd1d4a146103bc57806372375078146103d1578063808ff9e51461042357806399892e47146104b1578063bed34bba146104da578063c35dee3414610592578063dfbf53ae146105ef575b600080fd5b34156100e057600080fd5b6100e861067d565b6040518080602001828103825283818151815260200191508051906020019080838360005b8381101561012857808201518184015260208101905061010d565b50505050905090810190601f1680156101555780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b341561016e57600080fd5b61017661071b565b6040518080602001828103825283818151815260200191508051906020019080838360005b838110156101b657808201518184015260208101905061019b565b50505050905090810190601f1680156101e35780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b34156101fc57600080fd5b6102046107b9565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b341561025157600080fd5b6102ae60048080356000191690602001909190803590602001908201803590602001908080601f016020809104026020016040519081016040528093929190818152602001838380828437820191505050505050919050506107df565b005b6102b86108fd565b005b34156102c557600080fd5b61036560048080356000191690602001909190803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509190803590602001908201803590602001908080601f01602080910402602001604051908101604052809392919081815260200183838082843782019150505050505091905050610b7d565b005b341561037257600080fd5b61037a610b82565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b34156103c757600080fd5b6103cf610ba8565b005b610421600480803590602001908201803590602001908080601f01602080910402602001604051908101604052809392919081815260200183838082843782019150505050505091905050610f10565b005b341561042e57600080fd5b610436610f6b565b6040518080602001828103825283818151815260200191508051906020019080838360005b8381101561047657808201518184015260208101905061045b565b50505050905090810190601f1680156104a35780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b34156104bc57600080fd5b6104c4611009565b6040518082815260200191505060405180910390f35b34156104e557600080fd5b610578600480803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509190803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509190505061100f565b604051808215151515815260200191505060405180910390f35b341561059d57600080fd5b6105ed600480803590602001908201803590602001908080601f016020809104026020016040519081016040528093929190818152602001838380828437820191505050505050919050506110e8565b005b34156105fa57600080fd5b61060261110a565b6040518080602001828103825283818151815260200191508051906020019080838360005b83811015610642578082015181840152602081019050610627565b50505050905090810190601f16801561066f5780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b600b8054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156107135780601f106106e857610100808354040283529160200191610713565b820191906000526020600020905b8154815290600101906020018083116106f657829003601f168201915b505050505081565b60058054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156107b15780601f10610786576101008083540402835291602001916107b1565b820191906000526020600020905b81548152906001019060200180831161079457829003601f168201915b505050505081565b600860009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b6107e76111a8565b73ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561082057600080fd5b80600a90805190602001906108369291906121bc565b507f693a2ab4ca729c1d26ea1b413d109309e962f67b8a7ecfaad13dd3db54f58049600a60405180806020018281038252838181546001816001161561010002031660029004815260200191508054600181600116156101000203166002900480156108e35780601f106108b8576101008083540402835291602001916108e3565b820191906000526020600020905b8154815290600101906020018083116108c657829003601f168201915b50509250505060405180910390a16108f9610ba8565b5050565b3073ffffffffffffffffffffffffffffffffffffffff16316109536040805190810160405280600381526020017f55524c0000000000000000000000000000000000000000000000000000000000815250611497565b1115610a12577f621c2856e3b87f81235f8ac8a22bbb40a0142961960710d00b2b6c380902b57e60405180806020018281038252604b8152602001807f4f7261636c697a6520717565727920776173204e4f542073656e742c20706c6581526020017f6173652061646420736f6d652045544820746f20636f76657220666f7220746881526020017f652071756572792066656500000000000000000000000000000000000000000081525060600191505060405180910390a1610b7b565b7f621c2856e3b87f81235f8ac8a22bbb40a0142961960710d00b2b6c380902b57e6040518080602001828103825260358152602001807f4f7261636c697a65207175657279207761732073656e742c207374616e64696e81526020017f6720627920666f722074686520616e737765722e2e000000000000000000000081525060400191505060405180910390a1610b796040805190810160405280600381526020017f55524c0000000000000000000000000000000000000000000000000000000000815250600b8054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015610b6f5780601f10610b4457610100808354040283529160200191610b6f565b820191906000526020600020905b815481529060010190602001808311610b5257829003601f168201915b50505050506117f8565b505b565b505050565b600760009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b610ce6600a8054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015610c415780601f10610c1657610100808354040283529160200191610c41565b820191906000526020600020905b815481529060010190602001808311610c2457829003601f168201915b505050505060058054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015610cdc5780601f10610cb157610100808354040283529160200191610cdc565b820191906000526020600020905b815481529060010190602001808311610cbf57829003601f168201915b505050505061100f565b15610d5b57600760009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166108fc3073ffffffffffffffffffffffffffffffffffffffff16319081150290604051600060405180830381858888f19350505050505b610e99600a8054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015610df45780601f10610dc957610100808354040283529160200191610df4565b820191906000526020600020905b815481529060010190602001808311610dd757829003601f168201915b505050505060068054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015610e8f5780601f10610e6457610100808354040283529160200191610e8f565b820191906000526020600020905b815481529060010190602001808311610e7257829003601f168201915b505050505061100f565b15610f0e57600860009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166108fc3073ffffffffffffffffffffffffffffffffffffffff16319081150290604051600060405180830381858888f19350505050505b565b33600860006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055508060069080519060200190610f679291906121bc565b5050565b60068054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156110015780601f10610fd657610100808354040283529160200191611001565b820191906000526020600020905b815481529060010190602001808311610fe457829003601f168201915b505050505081565b60095481565b6000816040518082805190602001908083835b6020831015156110475780518252602082019150602081019050602083039250611022565b6001836020036101000a038019825116818451168082178552505050505050905001915050604051809103902060001916836040518082805190602001908083835b6020831015156110ae5780518252602082019150602081019050602083039250611089565b6001836020036101000a03801982511681845116808217855250505050505090500191505060405180910390206000191614905092915050565b80600a90805190602001906110fe9291906121bc565b50611107610ba8565b50565b600a8054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156111a05780601f10611175576101008083540402835291602001916111a0565b820191906000526020600020905b81548152906001019060200180831161118357829003601f168201915b505050505081565b6000806000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff161480611218575060006112166000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff16611d06565b145b15611229576112276000611d11565b505b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166338cc48316040518163ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401602060405180830381600087803b15156112ad57600080fd5b5af115156112ba57600080fd5b5050506040518051905073ffffffffffffffffffffffffffffffffffffffff16600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff161415156113f6576000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166338cc48316040518163ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401602060405180830381600087803b151561139e57600080fd5b5af115156113ab57600080fd5b50505060405180519050600160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055505b600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663c281d19e6040518163ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401602060405180830381600087803b151561147b57600080fd5b5af1151561148857600080fd5b50505060405180519050905090565b6000806000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff161480611507575060006115056000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff16611d06565b145b15611518576115166000611d11565b505b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166338cc48316040518163ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401602060405180830381600087803b151561159c57600080fd5b5af115156115a957600080fd5b5050506040518051905073ffffffffffffffffffffffffffffffffffffffff16600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff161415156116e5576000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166338cc48316040518163ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401602060405180830381600087803b151561168d57600080fd5b5af1151561169a57600080fd5b50505060405180519050600160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055505b600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663524f3889836040518263ffffffff167c01000000000000000000000000000000000000000000000000000000000281526004018080602001828103825283818151815260200191508051906020019080838360005b8381101561178f578082015181840152602081019050611774565b50505050905090810190601f1680156117bc5780820380516001836020036101000a031916815260200191505b5092505050602060405180830381600087803b15156117da57600080fd5b5af115156117e757600080fd5b505050604051805190509050919050565b60008060008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16148061186a575060006118686000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff16611d06565b145b1561187b576118796000611d11565b505b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166338cc48316040518163ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401602060405180830381600087803b15156118ff57600080fd5b5af1151561190c57600080fd5b5050506040518051905073ffffffffffffffffffffffffffffffffffffffff16600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16141515611a48576000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166338cc48316040518163ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401602060405180830381600087803b15156119f057600080fd5b5af115156119fd57600080fd5b50505060405180519050600160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055505b600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663524f3889856040518263ffffffff167c01000000000000000000000000000000000000000000000000000000000281526004018080602001828103825283818151815260200191508051906020019080838360005b83811015611af2578082015181840152602081019050611ad7565b50505050905090810190601f168015611b1f5780820380516001836020036101000a031916815260200191505b5092505050602060405180830381600087803b1515611b3d57600080fd5b5af11515611b4a57600080fd5b50505060405180519050905062030d403a02670de0b6b3a764000001811115611b795760006001029150611cff565b600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663adf59f9982600087876040518563ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808481526020018060200180602001838103835285818151815260200191508051906020019080838360005b83811015611c31578082015181840152602081019050611c16565b50505050905090810190601f168015611c5e5780820380516001836020036101000a031916815260200191505b50838103825284818151815260200191508051906020019080838360005b83811015611c97578082015181840152602081019050611c7c565b50505050905090810190601f168015611cc45780820380516001836020036101000a031916815260200191505b50955050505050506020604051808303818588803b1515611ce457600080fd5b5af11515611cf157600080fd5b505050506040518051905091505b5092915050565b6000813b9050919050565b600080611d31731d3b2638a7cc9f2cb3d298a3da7a90b67e5506ed611d06565b1115611dd257731d3b2638a7cc9f2cb3d298a3da7a90b67e5506ed6000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550611dc96040805190810160405280600b81526020017f6574685f6d61696e6e65740000000000000000000000000000000000000000008152506121a2565b6001905061219d565b6000611df173c03a2615d5efaf5f49f60b7bb6583eaec212fdf1611d06565b1115611e925773c03a2615d5efaf5f49f60b7bb6583eaec212fdf16000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550611e896040805190810160405280600c81526020017f6574685f726f707374656e3300000000000000000000000000000000000000008152506121a2565b6001905061219d565b6000611eb173b7a07bcf2ba2f2703b24c0691b5278999c59ac7e611d06565b1115611f525773b7a07bcf2ba2f2703b24c0691b5278999c59ac7e6000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550611f496040805190810160405280600981526020017f6574685f6b6f76616e00000000000000000000000000000000000000000000008152506121a2565b6001905061219d565b6000611f7173146500cfd35b22e4a392fe0adc06de1a1368ed48611d06565b11156120125773146500cfd35b22e4a392fe0adc06de1a1368ed486000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506120096040805190810160405280600b81526020017f6574685f72696e6b6562790000000000000000000000000000000000000000008152506121a2565b6001905061219d565b6000612031736f485c8bf6fc43ea212e93bbf8ce046c7f1cb475611d06565b111561209457736f485c8bf6fc43ea212e93bbf8ce046c7f1cb4756000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506001905061219d565b60006120b37320e12a1f859b3feae5fb2a0a32c18f5a65555bbf611d06565b1115612116577320e12a1f859b3feae5fb2a0a32c18f5a65555bbf6000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506001905061219d565b60006121357351efaf4c8b3c9afbd5ab9f4bbc82784ab6ef8faa611d06565b1115612198577351efaf4c8b3c9afbd5ab9f4bbc82784ab6ef8faa6000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506001905061219d565b600090505b919050565b80600290805190602001906121b89291906121bc565b5050565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106121fd57805160ff191683800117855561222b565b8280016001018555821561222b579182015b8281111561222a57825182559160200191906001019061220f565b5b509050612238919061223c565b5090565b61225e91905b8082111561225a576000816000905550600101612242565b5090565b905600a165627a7a72305820462dbd2931c44863d704480a4f46779301f2f07e7371e5ef7d92795d771ab6180029";
var abi = [
    {
        "constant": true,
        "inputs": [],
        "name": "winner",
        "outputs": [
            {
                "name": "",
                "type": "string"
            }
        ],
        "payable": false,
        "stateMutability": "view",
        "type": "function"
    },
    {
        "constant": true,
        "inputs": [],
        "name": "team1name",
        "outputs": [
            {
                "name": "",
                "type": "string"
            }
        ],
        "payable": false,
        "stateMutability": "view",
        "type": "function"
    },
    {
        "constant": true,
        "inputs": [],
        "name": "team1bet",
        "outputs": [
            {
                "name": "",
                "type": "address"
            }
        ],
        "payable": false,
        "stateMutability": "view",
        "type": "function"
    },
    {
        "constant": true,
        "inputs": [],
        "name": "team0name",
        "outputs": [
            {
                "name": "",
                "type": "string"
            }
        ],
        "payable": false,
        "stateMutability": "view",
        "type": "function"
    },
    {
        "constant": true,
        "inputs": [],
        "name": "team0bet",
        "outputs": [
            {
                "name": "",
                "type": "address"
            }
        ],
        "payable": false,
        "stateMutability": "view",
        "type": "function"
    },
    {
        "constant": true,
        "inputs": [
            {
                "name": "a",
                "type": "string"
            },
            {
                "name": "b",
                "type": "string"
            }
        ],
        "name": "compareStrings",
        "outputs": [
            {
                "name": "",
                "type": "bool"
            }
        ],
        "payable": false,
        "stateMutability": "view",
        "type": "function"
    },
    {
        "constant": true,
        "inputs": [],
        "name": "matchId",
        "outputs": [
            {
                "name": "",
                "type": "uint256"
            }
        ],
        "payable": false,
        "stateMutability": "view",
        "type": "function"
    },
    {
        "constant": true,
        "inputs": [],
        "name": "oraclizeUrl",
        "outputs": [
            {
                "name": "",
                "type": "string"
            }
        ],
        "payable": false,
        "stateMutability": "view",
        "type": "function"
    },
    {
        "anonymous": false,
        "inputs": [
            {
                "indexed": false,
                "name": "description",
                "type": "string"
            }
        ],
        "name": "LogNewOraclizeQuery",
        "type": "event"
    },
    {
        "anonymous": false,
        "inputs": [
            {
                "indexed": false,
                "name": "winner",
                "type": "string"
            }
        ],
        "name": "LogWinnerUpdated",
        "type": "event"
    },
    {
        "constant": false,
        "inputs": [
            {
                "name": "myid",
                "type": "bytes32"
            },
            {
                "name": "result",
                "type": "string"
            },
            {
                "name": "proof",
                "type": "bytes"
            }
        ],
        "name": "__callback",
        "outputs": [],
        "payable": false,
        "stateMutability": "nonpayable",
        "type": "function"
    },
    {
        "constant": false,
        "inputs": [
            {
                "name": "myid",
                "type": "bytes32"
            },
            {
                "name": "result",
                "type": "string"
            }
        ],
        "name": "__callback",
        "outputs": [],
        "payable": false,
        "stateMutability": "nonpayable",
        "type": "function"
    },
    {
        "constant": false,
        "inputs": [
            {
                "name": "_winner",
                "type": "string"
            }
        ],
        "name": "setWinner",
        "outputs": [],
        "payable": false,
        "stateMutability": "nonpayable",
        "type": "function"
    },
    {
        "inputs": [
            {
                "name": "_matchId",
                "type": "uint256"
            },
            {
                "name": "_teamName",
                "type": "string"
            },
            {
                "name": "_url",
                "type": "string"
            }
        ],
        "payable": true,
        "stateMutability": "payable",
        "type": "constructor"
    },
    {
        "constant": false,
        "inputs": [
            {
                "name": "_teamName",
                "type": "string"
            }
        ],
        "name": "makeBet",
        "outputs": [],
        "payable": true,
        "stateMutability": "payable",
        "type": "function"
    },
    {
        "constant": false,
        "inputs": [],
        "name": "payout",
        "outputs": [],
        "payable": false,
        "stateMutability": "nonpayable",
        "type": "function"
    },
    {
        "constant": false,
        "inputs": [],
        "name": "updateWinner",
        "outputs": [],
        "payable": true,
        "stateMutability": "payable",
        "type": "function"
    }
];

//todo get help, literally - crossing out like that, rly?
function setBetValuesForSubmit(set_team, contractAddress) {

    var setTeamSelect = document.getElementById("team4bet");

    var setTeam;
    var openTeam;
    var setTeamName;
    var openTeamName;

    setTeam = set_team;

    if(set_team == 0) {
         openTeam = 1;
    }
    else {
        openTeam = 0;
    }

    setTeamName = setTeamSelect.options[setTeam].text;

    if(setTeam == 0) {
        openTeamName = setTeamSelect.options[1].text;
    }
    else {
        openTeamName = setTeamSelect.options[0].text;
    }

    // alert("setTeam val: " + setTeam);
    // alert("setTeam name: " + setTeamName);
    // alert("openTeam val: " + openTeam);
    // alert("openTeam name: " + openTeamName);

    //todo - think about if you really need the set/open team names if i have opponent1 and 2 already stored in the bet
    document.getElementById("set_team").value = setTeam;
    document.getElementById("set_team_name").value = setTeamName;
    document.getElementById("open_team").value = openTeam;
    document.getElementById("open_team_name").value = openTeamName;
    document.getElementById("deployedContractAddress").value = contractAddress;
}

/**
 * Deploy given contract
 */
deployContractButton.addEventListener("click", function() {

    var matchId = document.querySelector("#matchId").value;
    var betAmount = document.querySelector("#betAmount").value*1000000000000000000;
    var set_team = document.querySelector("#team4bet").value;

    var setTeamSelect = document.getElementById("team4bet");

    var oraclizeUrl = "json(https://api.pandascore.co/matches?filter[id]=" + matchId + "&token=xFEMHt5iIXzTaDydesV2fk01-L-YKp7OFLcZcWZJ4tav2Og-7jA).0.winner.name";
    var setTeamName = setTeamSelect.options[set_team].text;

    console.log(oraclizeUrl);
    console.log(setTeamName);

    var contract = myweb3.eth.contract(abi);

    var  txnObject = {
        from: myweb3.eth.defaultAccount,
        data: bytecode,
        gas: 3000000,
        value: betAmount
    };

    //constructor params!
    contract.new(matchId, setTeamName, oraclizeUrl, txnObject,function(error,result){
        if (!error) {
            // result.address gets set within second call of fallback function
            if (result.address) {
                // gets set in the second call
                console.log(createEtherscanIoUrl('address', result.address));

                setBetValuesForSubmit(set_team, result.address);

                document.submitBet.submit();
            } else {
                // first callback call result address is not given
                console.log(createEtherscanIoUrl('tx', result.transactionHash));
                //pollTransactionReceipt(result.transactionHash);
                enableLoader(result.transactionHash);
            }
        } else {
            console.log("error contract.new: " + error);
            
        }
    });
});


/**
 * Create the etherscan link
 */
// TODO global function! used wherever
function createEtherscanIoUrl(type,hashOrNumber){

    var etherscanBaseUrl='https://ropsten.etherscan.io/';

    var url = etherscanBaseUrl;
    if(type === 'tx'){
        url += 'tx/'+hashOrNumber;
    } else if(type === 'block'){
        url += 'block/'+hashOrNumber;
    } else if(type === 'address'){
        url += 'address/'+hashOrNumber;
    }
    return url;
}

/**
 * Polls transaction receipt for deployed contract until contract gets properly deployed
 * Fixes the 2nd callback function call from contract.new
 */
function pollTransactionReceipt(transactionHash) {
    var delay = 2000;

    myweb3.eth.getTransactionReceipt(transactionHash, function(error, result) {
        if(error) {
            console.log("error executing getTransactionReceipt:  " + error);
        }
        else {
            if(result === null) {
                setTimeout(function() {
                    pollTransactionReceipt(transactionHash);
                }, delay);
            }
            else {
                console.log(createEtherscanIoUrl('address', result.address));
            }
        }
    });
}

function enableLoader(transactionHash) {
    document.getElementById("loader").style.display = "block";
    document.getElementById("loaderLink").innerHTML = "<a href=" + createEtherscanIoUrl("tx", transactionHash) + " target=\"_blank\">" + createEtherscanIoUrl("tx", transactionHash) + "</a>";
}